Variable_name	Value
have_dynamic_loading	YES
###
# Test for loading two plugins both with full path
###
# restart:EXAMPLE_PLUGIN_LOAD_PATH PLUGIN_AUTH_LOAD_ADD_PATH
SELECT COUNT(*) FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_NAME = 'EXAMPLE';
COUNT(*)
1
SELECT COUNT(*) FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_NAME = 'test_plugin_server';
COUNT(*)
1
SELECT COUNT(*) FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_NAME = 'cleartext_plugin_server';
COUNT(*)
1
###
# Test for loading two plugins one with full path and another with
# just filename
###
# restart:PLUGIN_AUTH_OPT PLUGIN_AUTH_LOAD EXAMPLE_PLUGIN_LOAD_ADD_PATH
SELECT COUNT(*) FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_NAME = 'EXAMPLE';
COUNT(*)
1
SELECT COUNT(*) FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_NAME = 'test_plugin_server';
COUNT(*)
1
SELECT COUNT(*) FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_NAME = 'cleartext_plugin_server';
COUNT(*)
1
###
# Test for loading the same plugin two times - both with path and
# without one
###
# restart:EXAMPLE_PLUGIN_OPT EXAMPLE_PLUGIN_LOAD EXAMPLE_PLUGIN_LOAD_ADD_PATH
SELECT COUNT(*) FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_NAME = 'EXAMPLE';
COUNT(*)
1
###
# Test for loading plugins with 'INSTALL PLUGIN'
###
# restart:PLUGIN_AUTH_OPT
INSTALL PLUGIN example SONAME 'MODIFIED_EXAMPLE_PLUGIN';
INSTALL PLUGIN example SONAME 'MYSQL_TMP_DIR/MODIFIED_EXAMPLE_PLUGIN';
ERROR HY000: No paths allowed for shared library
INSTALL PLUGIN test_plugin_server SONAME 'auth_test_plugin.so';
INSTALL PLUGIN cleartext_plugin_server SONAME 'auth_test_plugin.so';
SELECT COUNT(*) FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_NAME = 'EXAMPLE';
COUNT(*)
0
SELECT COUNT(*) FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_NAME = 'test_plugin_server';
COUNT(*)
1
SELECT COUNT(*) FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_NAME = 'cleartext_plugin_server';
COUNT(*)
1
UNINSTALL PLUGIN test_plugin_server;
UNINSTALL PLUGIN cleartext_plugin_server;
###
# Test for path in UDF library loading
###
# restart:UDF_EXAMPLE_LIB_OPT
CREATE FUNCTION metaphon RETURNS STRING SONAME "UDF_EXAMPLE_LIB";
DROP FUNCTION metaphon;
CREATE FUNCTION metaphon RETURNS STRING SONAME "UDF_EXAMPLE_LIB_DIR/UDF_EXAMPLE_LIB";
ERROR HY000: No paths allowed for shared library
